# 自动化

自动化对于代码的可维护性十分重要；

- 基础介绍
- 文件和目录结构

## 1. 基础介绍

在 2000 年之前，Web 开发者会将源码原封不动的部署到线上，这样做的好处是源码和线上文件一一对应方便修改，但是当文件数量较多或者项目由多人维护的时候，这种部署方式就十分的不利于维护了；

由于自动化部署对于代码的可维护性十分有利，所以目前的所有的大型和许多小型项目 web 应用都依赖于自动化构建工具处理醒目中的 JavaScript 文件，自动化在其它 Web 应用框架中十分常见；

- 利弊

    1. 使用自动化构建系统构建 JavaScript 的优点如下：

        - 本地文件源码不必和线上保持一致，所以你可以任意的组织你的代码结构而不用担心线上的代码是否需要优化；（比如：本地中每一个功能组都是一个单文件夹存放，然后通过自动化构建工具打包成为一个文件后在上传）
        - 静态分析能够自动发现错误（jsLint）
        - 在部署之前可以对 JavaScript 文件使用多种方式进行预处理（压缩和链接）
        - 通过自动化测试可以很容易发现问题（mook）
        - 很方便的自动部署到服务器；
        - 可以轻松快速的重新执行常见任务

    2. 使用自动化构建工具同样具有一些弊端：

        - 在开发环境下修改后可能都需要重新在本地构建后才能执行
        - 生产环境下的代码和开发环境下的代码很可能具有很多差异，不利于定位线上 bug
        - 技术水平较低的开发者使用构建系统可能出现问题

    建议：从各个方面来看，使用自动化构建工具的优点会远远大于它的缺点，所以建议在构建 web 项目中，使用自动化构建工具来部署；

## 2. 文件和目录结构

在开始构建你的系统之前要先确定如何组织你的文件和目录，这个这个结构受项目类型的影响极大，如果项目是一个独立的 JavaScript 类库，你可能需要结构，而不是包含所有文件的项目网站；

1. 最佳实践

    1. 一个项目只包含一个对象
        特指每一个 JavaScript 文件应该只包含一个 JavaScript 对象的代码，这种方式可以提高代码的可维护性；

    2. 相关的文件用目录分分组
        如果你有多个相互关联的对象，那么就把这些文件都放在一个目录下管理；这样可以更容易的定位功能；

    3. 保持第三方代码的独立
        任何不是你写的或者不是你维护的代码都应该独立与项目工程之外，最好使用 CDN 加载，或者将这些文件单独的放在项目工程中的一个目录中；

    4. 确定创建位置
        创建后的 JavaScript 文件，应该放置在一个完全独立的目录中，并且这个目录不应该提交到项目工程中，项目工程中应该是编译后的文件目录，而不应该是源码目录；而编译后的目录同样不应该放到源码工程中，最好要保证编译产生的是可以最终发布的成品；

    5. 保持测试代码的完整性
        测试代码应该一起提交到项目工程中，这可以快速注意到遗漏测试的情况；

2. 基本结构
    一个 JavaScript 项目目录常见有如下几种格式：

    1. build -- 存放构建文件，通常这个文件不会提交
    2. src -- 用来存放源文件，包括进行文件分组的子目录
    3. test || tests -- 用于存放测试文件，通常包含一些同源代码的目录和 src 中的文件一一对应
    4. release -- 存放最新的稳定发行的版本

    你的开发环境和构建过程很大程度的决定了你会选择怎样的形式的解构，好的解构可以缩短构建的时间并且不会让人在新建文件的时候纠结放在什么位置；

## 3. Ant
    
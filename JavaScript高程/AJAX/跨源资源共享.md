# Learn JavaScript

## 跨源资源共享

JavaScript 中为了安全问题，不允许不同源的两个文件相互请求，但是合理的跨源请求又是至关重要的；

### 方法一： CORS 

CORS（跨源资源共享）使用过自定义的HTTP头部让浏览器与服务器沟通，从而决定请求或者响应是否应该成功

在后端文件中输入 `header(Access-Control-Allow-Origin: [url])` 如果是一个公共资源可以  使用 "*";

值得注意的是：这种情况下 请求和响应都不会携带 cookie 信息

[ajax -- 你真的会使用XMLHttpRequest吗](https://segmentfault.com/a/1190000004322487)
中有解决方式：
我们都知道，在发同域请求时，浏览器会将cookie自动加在request header中。但大家是否遇到过这样的场景：在发送跨域请求时，cookie并没有自动加在request header中。

造成这个问题的原因是：在CORS标准中做了规定，默认情况下，浏览器在发送跨域请求时，不能发送任何认证信息（credentials）如"cookies"和"HTTP authentication schemes"。除非xhr.withCredentials为true（xhr对象有一个属性叫withCredentials，默认值为false）。

所以根本原因是cookies也是一种认证信息，在跨域请求中，client端必须手动设置xhr.withCredentials=true，且server端也必须允许request能携带认证信息（即response header中包含Access-Control-Allow-Credentials:true），这样浏览器才会自动将cookie加在request header中。

另外，要特别注意一点，一旦跨域request能够携带认证信息，server端一定不能将Access-Control-Allow-Origin设置为*，而必须设置为请求页面的域名。

这种方式支持 IE10+

### 方法二：